<section class="timetable-horizontal" *ngIf="syllabus() as data">
  <div class="subject-card" *ngFor="let sbj of data.subjects | keyvalue">
    <!-- SUBJECT HEADER -->
    <header class="subject-header">
      <div class="title">
        <h4>{{ sbj.key }}</h4>
        <span class="code">{{ sbj.value.code }}</span>
      </div>

      <!-- CURRENT CHAPTER -->
      <div class="current-box" *ngIf="getCurrent(sbj.key) as cur">
        <small>Current chapter</small>
        <strong>{{ getChapterName(sbj.key, cur) }}</strong>
      </div>
    </header>

    <!-- CHAPTER LIST -->
    <div class="chapters">
      <div
        class="chapter"
        *ngFor="let ch of sbj.value.chapters; let idx = index"
        [class.completed]="idx < getProgress(sbj.key)"
        [class.current]="ch.code === getCurrent(sbj.key)"
        [class.locked]="idx > getProgress(sbj.key)"
      >
        <div class="chapter-left">
          <div class="chapter-name">{{ ch.name }}</div>
          <div class="chapter-desc" *ngIf="ch.desc">{{ ch.desc }}</div>

          <span class="tag completed" *ngIf="idx < getProgress(sbj.key)"> Completed </span>

          <span class="tag current" *ngIf="ch.code === getCurrent(sbj.key)"> In Progress </span>

          <span class="tag locked" *ngIf="idx > getProgress(sbj.key)"> Not Started </span>
        </div>

        <div class="chapter-right">
          <span class="chip">{{ ch.code }}</span>
        </div>
      </div>
    </div>
  </div>
</section>
